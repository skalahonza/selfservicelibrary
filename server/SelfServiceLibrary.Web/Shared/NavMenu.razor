@using CVUT.Auth.Options
@using Microsoft.Extensions.Options
@inject IOptions<oAuth2Options> options
@using Microsoft.AspNetCore.Components.Authorization
@inject AuthenticationStateProvider AuthenticationStateProvider

<Bar Mode="BarMode.VerticalInline"
     CollapseMode="BarCollapseMode.Small"
     Breakpoint="Breakpoint.Desktop"
     NavigationBreakpoint="Breakpoint.Tablet"
     ThemeContrast="ThemeContrast.Dark">
    <BarToggler />
    <BarBrand>
        <BarItem>
            <BarLink To="/">
                <BarIcon IconName="IconName.Dashboard" />
                Self Service Library
            </BarLink>
        </BarItem>
    </BarBrand>
    <BarMenu>
        <BarStart>
            <BarItem>
                <BarLink To="/search">
                    <BarIcon IconName="IconName.Search" />
                    Search
                </BarLink>
            </BarItem>
            <BarItem>
                <BarLink To="/books">
                    <BarIcon IconName="IconName.Book" />
                    Books
                </BarLink>
            </BarItem>

            <AuthorizeView>
                <Authorized>
                    <BarItem>
                        <BarLink To="/my-issues">
                            <BarIcon IconName="IconName.BookReader" />
                            My Issues
                        </BarLink>
                    </BarItem>
                    <BarItem>
                        <BarLink To="/issues">
                            <BarIcon IconName="IconName.Bookmark" />
                            All Issues
                        </BarLink>
                    </BarItem>
                </Authorized>
            </AuthorizeView>

        </BarStart>
        <BarEnd>
            <AuthorizeView>
                <NotAuthorized>
                    <BarItem>
                        <a href="/login" class="b-bar-link"><BarIcon IconName="IconName.User" /> Login</a>
                    </BarItem>
                </NotAuthorized>
                <Authorized>
                    <BarItem>
                        <BarLink To="/profile">
                            <BarIcon IconName="IconName.User" />
                            Profile
                        </BarLink>
                    </BarItem>
                    <BarItem>
                        <a href="/logout" class="b-bar-link"><BarIcon IconName="IconName.Lock" /> Logout</a>
                    </BarItem>
                </Authorized>
            </AuthorizeView>
        </BarEnd>
    </BarMenu>
</Bar>